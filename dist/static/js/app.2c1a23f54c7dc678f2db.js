webpackJsonp([1],{"2gkG":function(t,e){},"39eq":function(t,e){},"4OVt":function(t,e){},"4WtQ":function(t,e){},"5z7N":function(t,e){},"9Q8N":function(t,e){},FB6N:function(t,e){},I0zA:function(t,e,n){"use strict";(function(t){var e,o,r=n("t8s9"),s=n.n(r);e=this,o=function(t){var e,n,o,r,s,i,a,c;e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(t){var e,n,o,r;return(r=a.getSelection())&&(o=0,n=!1,(e=function(t,s){var a,c,u,l,h,d;for(d=[],u=0,l=(h=s.childNodes).length;l>u&&(a=h[u],!n);u++)if(3===a.nodeType){if(o+a.length>=t){n=!0,(c=i.createRange()).setStart(a,t-o),r.removeAllRanges(),r.addRange(c);break}d.push(o+=a.length)}else d.push(e(t,a));return d})(t,this.domInputor)),this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=i.selection.createRange(),(t=i.body.createTextRange()).moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?((t=n.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):i.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return(t=i.selection.createRange().duplicate()).moveStart("character",-1),{height:(e=t.getBoundingClientRect()).bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,o,r,s;return a.getSelection&&(o=this.range())?(o.endOffset-1>0&&o.endContainer!==this.domInputor&&((e=o.cloneRange()).setStart(o.endContainer,o.endOffset-1),e.setEnd(o.endContainer,o.endOffset),n={height:(r=e.getBoundingClientRect()).height,left:r.left+r.width,top:r.top},e.detach()),n&&0!==(null!=n?n.height:void 0)||(e=o.cloneRange(),s=t(i.createTextNode("|")),e.insertNode(s[0]),e.selectNode(s[0]),n={height:(r=e.getBoundingClientRect()).height,left:r.left,top:r.top},s.remove(),e.detach())):i.selection&&(n=this.getOldIEOffset()),n&&(n.top+=t(a).scrollTop(),n.left+=t(a).scrollLeft()),n},e.prototype.range=function(){var t;if(a.getSelection)return(t=a.getSelection()).rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,o,r,s;return e=this.domInputor,o=0,(r=i.selection.createRange())&&r.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n").length,(s=e.createTextRange()).moveToBookmark(r.getBookmark()),(t=e.createTextRange()).collapse(!1),o=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),o},e.prototype.getPos=function(){return i.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,i.selection?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e;return e=this.domInputor.createTextRange(),t||(t=this.getPos()),e.move("character",t),{left:e.boundingLeft,top:e.boundingTop,height:e.boundingHeight}},e.prototype.getOffset=function(e){var n,o,r;return n=this.$inputor,i.selection?((o=this.getIEOffset(e)).top+=t(a).scrollTop()+n.scrollTop(),o.left+=t(a).scrollLeft()+n.scrollLeft(),o):(o=n.offset(),r=this.getPosition(e),o={left:o.left+r.left-n.scrollLeft(),top:o.top+r.top-n.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,n,r,s,i;return e=this.$inputor,r=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),i=e.val().slice(0,t),n=e.val().slice(t),s="<span style='position: relative; display: inline;'>"+r(i)+"</span>",s+="<span id='caret' style='position: relative; display: inline;'>|</span>",s+="<span style='position: relative; display: inline;'>"+r(n)+"</span>",new o(e).create(s).rect()},e.prototype.getIEPosition=function(t){var e,n;return n=this.getIEOffset(t),e=this.$inputor.offset(),{left:n.left-e.left,top:n.top-e.top,height:n.height}},e}(),o=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,o){return e[o]=n.$inputor.css(o)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return n={left:(e=(t=this.$mirror.find("#caret")).position()).left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},s={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return i.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},i=null,a=null,c=function(t){var e;return(e=null!=t?t.iframe:void 0)?(e,a=e.contentWindow,i=e.contentDocument||a.document):(void 0,a=window,i=document)},t.fn.caret=function(o,i,a){var u;return s[o]?(t.isPlainObject(i)?(c(i),i=void 0):c(a),u=r.contentEditable(this)?new e(this):new n(this),s[o].apply(u,[i])):t.error("Method "+o+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=s},"function"==typeof define&&n("YV3B")?define(["jquery"],function(t){return e.returnExportsGlobal=o(t)}):"object"==("undefined"==typeof exports?"undefined":s()(exports))?t.exports=o(n("4kSj")):o(jQuery)}).call(e,n("wb6k")(t))},JXHF:function(t,e,n){"use strict";(function(t){var e,o=n("t8s9"),r=n.n(o);e=function(t){var e,n,o;n={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return s.arrayToDefaultHash(t)},matcher:function(t,e,n,o){var r,s,i;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=decodeURI("%C3%80"),s=decodeURI("%C3%BF"),(i=new RegExp(t+"([A-Za-z"+r+"-"+s+"0-9_"+(o?" ":"")+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi").exec(e))?i[2]||i[1]:null},filter:function(t,e,n){var o,r,s,i;for(o=[],r=0,i=e.length;i>r;r++)s=e[r],~new String(s[n]).toLowerCase().indexOf(t.toLowerCase())&&o.push(s);return o},remoteFilter:null,sorter:function(t,e,n){var o,r,s,i;if(!t)return e;for(o=[],r=0,i=e.length;i>r;r++)(s=e[r]).atwho_order=new String(s[n]).toLowerCase().indexOf(t.toLowerCase()),s.atwho_order>-1&&o.push(s);return o.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var n,o;o=t;try{return"string"!=typeof t&&(o=t(e)),o.replace(/\$\{([^\}]*)\}/g,function(t,n,o){return e[n]})}catch(n){return n,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*([^<]*?)("+e.replace("+","\\+")+")([^<]*)\\s*<","ig"),t.replace(n,function(t,e,n,o){return"> "+e+"<strong>"+n+"</strong>"+o+" <"})):t},beforeInsert:function(t,e,n){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}},o=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var n;return null!=(n=this.$el)&&n.remove(),t(e.body).append(this.$el=t("<div class='atwho-container'></div>"))},e.prototype.setupRootElement=function(e,n){var o,r;if(null==n&&(n=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(r){if(o=r,this.iframe=null,t.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+o)}}return this.createContainer((this.iframeAsRoot=n)?this.document:document)},e.prototype.controller=function(t){var e,n,o,r;if(this.aliasMaps[t])n=this.controllers[this.aliasMaps[t]];else for(o in r=this.controllers)if(e=r[o],o===t){n=e;break}return n||this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var n,o;return o=(n=this.controllers)[t]||(n[t]=this.$inputor.is("[contentEditable]")?new l(this,t):new a(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),o.init(e),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",(t=this,function(e){var n;return null!=(n=t.controller())&&n.view.hide(),t.isComposing=!0,null})).on("compositionend",function(t){return function(e){return t.isComposing=!1,setTimeout(function(e){return t.dispatch(e)}),null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;return(n=t.controller())?(n.expectedQueryCBId=null,n.view.hide(e,n.getOpt("displayTimeout"))):void 0}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(n){var o,r;return o=n.target.scrollTop,e!==o&&null!=(r=t.controller())&&r.view.hide(n),e=o,!0}}}(this)());var t},e.prototype.shutdown=function(){var t,e;for(t in e=this.controllers)e[t].destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(t){var e,n,o,r;if(void 0!==t){for(e in r=[],o=this.controllers)n=o[e],r.push(n.lookUp(t));return r}},e.prototype.onKeyup=function(e){var o;switch(e.keyCode){case n.ESC:e.preventDefault(),null!=(o=this.controller())&&o.view.hide();break;case n.DOWN:case n.UP:case n.CTRL:case n.ENTER:t.noop();break;case n.P:case n.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var o,r;if((r=null!=(o=this.controller())?o.view:void 0)&&r.visible())switch(e.keyCode){case n.ESC:e.preventDefault(),r.hide(e);break;case n.UP:e.preventDefault(),r.prev();break;case n.DOWN:e.preventDefault(),r.next();break;case n.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case n.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case n.TAB:case n.ENTER:case n.SPACE:if(!r.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===n.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&e.keyCode===n.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var s,i=[].slice;s=function(){function n(e,n){this.app=e,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new h(this),this.view=new d(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.callDefault=function(){var n,o,r,s;s=arguments[0],n=2<=arguments.length?i.call(arguments,1):[];try{return e[s].apply(this,n)}catch(r){return o=r,t.error(o+" Or maybe At.js doesn't have function "+s)}},n.prototype.trigger=function(t,e){var n,o;return null==e&&(e=[]),e.push(this),o=(n=this.getOpt("alias"))?t+"-"+n+".atwho":t+".atwho",this.$inputor.trigger(o,e)},n.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||e[t]},n.prototype.getOpt=function(t,e){var n;try{return this.setting[t]}catch(n){return n,null}},n.prototype.insertContentFor=function(e){var n,o;return o=this.getOpt("insertTpl"),n=t.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,o,n,"onInsert")},n.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},n.arrayToDefaultHash=function(e){var n,o,r,s;if(!t.isArray(e))return e;for(s=[],n=0,r=e.length;r>n;n++)o=e[n],t.isPlainObject(o)?s.push(o):s.push({name:o});return s},n.prototype.lookUp=function(t){var e,n;if((!t||"click"!==t.type||this.getOpt("lookUpOnClick"))&&(!this.getOpt("suspendOnComposing")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(n=this.getOpt("delay"))?this._delayLookUp(e,n):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},n.prototype._delayLookUp=function(t,e){var n,o;return n=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=n),(o=e-(n-this.previousCallTime))>0&&e>o?(this.previousCallTime=n,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==n&&(this.previousCallTime=0),this._lookUp(t))},n.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},n.prototype._generateQueryCBId=function(){return{}},n.prototype._lookUp=function(e){var n;return n=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(n,this,this.expectedQueryCBId))},n}();var a,c=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,s),n.prototype.catchQuery=function(){var t,e,n,o,r,s,i;return e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),i=e.slice(0,t),(o="string"==typeof(r=this.callbacks("matcher").call(this,this.at,i,this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar"))))&&r.length<this.getOpt("minLen",0)?void 0:(o&&r.length<=this.getOpt("maxLen",20)?(n=(s=t-r.length)+r.length,this.pos=s,r={text:r,headPos:s,endPos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r)},n.prototype.rect=function(){var e,n,o;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(n=t(this.app.iframe).offset(),e.left+=n.left,e.top+=n.top),o=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+o}},n.prototype.insert=function(t,e){var n,o,r,s,i;return i=""+(r=(o=(n=this.$inputor).val()).slice(0,Math.max(this.query.headPos-this.at.length,0)))+(t+=s=""===(s=this.getOpt("suffix"))?s:s||" ")+o.slice(this.query.endPos||0),n.val(i),n.caret("pos",r.length+t.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},n}();var l,h,d,p;c=function(t,e){function n(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;l=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,s),o.prototype._getRange=function(){var t;return(t=this.app.window.getSelection()).rangeCount>0?t.getRangeAt(0):void 0},o.prototype._setRange=function(e,n,o){return null==o&&(o=this._getRange()),o&&n?(n=t(n)[0],"after"===e?(o.setEndAfter(n),o.setStartAfter(n)):(o.setEndBefore(n),o.setStartBefore(n)),o.collapse(!1),this._clearRange(o)):void 0},o.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},o.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===n.RIGHT||e===n.LEFT||e===n.UP||e===n.DOWN},o.prototype._unwrap=function(e){var n;return(n=(e=t(e).unwrap().get(0)).nextSibling)&&n.nodeValue&&(e.nodeValue+=n.nodeValue,t(n).remove()),e},o.prototype.catchQuery=function(e){var o,r,s,i,a,c,u,l,h,d,p,f;if((f=this._getRange())&&f.collapsed){if(e.which===n.ENTER)return(r=t(f.startContainer).closest(".atwho-query")).contents().unwrap(),r.is(":empty")&&r.remove(),(r=t(".atwho-query",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(f.startContainer).is(this.$inputor))return void this._clearRange();e.which===n.BACKSPACE&&f.startContainer.nodeType===document.ELEMENT_NODE&&(h=f.startOffset-1)>=0?((s=f.cloneRange()).setStart(f.startContainer,h),t(s.cloneContents()).contents().last().is(".atwho-inserted")&&(a=t(f.startContainer).contents().get(h),this._setRange("after",t(a).contents().last()))):e.which===n.LEFT&&f.startContainer.nodeType===document.TEXT_NODE&&((o=t(f.startContainer.previousSibling)).is(".atwho-inserted")&&0===f.startOffset&&this._setRange("after",o.contents().last()))}if(t(f.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(r=t(".atwho-query",this.app.document)).length>0&&r.is(":empty")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass("atwho-inserted"),r.length>0)switch(e.which){case n.LEFT:return this._setRange("before",r.get(0),f),void r.removeClass("atwho-query");case n.RIGHT:return this._setRange("after",r.get(0).nextSibling,f),void r.removeClass("atwho-query")}if(r.length>0&&(p=r.attr("data-atwho-at-query"))&&(r.empty().html(p).attr("data-atwho-at-query",null),this._setRange("after",r.get(0),f)),(s=f.cloneRange()).setStart(f.startContainer,0),c="string"==typeof(l=this.callbacks("matcher").call(this,this.at,s.toString(),this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar"))),0===r.length&&c&&(i=f.startOffset-this.at.length-l.length)>=0&&(f.setStart(f.startContainer,i),r=t("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),f.surroundContents(r.get(0)),(u=r.contents().last().get(0))&&(/firefox/i.test(navigator.userAgent)?(f.setStart(u,u.length),f.setEnd(u,u.length),this._clearRange(f)):this._setRange("after",u,f))),!(c&&l.length<this.getOpt("minLen",0)))return c&&l.length<=this.getOpt("maxLen",20)?(d={text:l,el:r},this.trigger("matched",[this.at,d.text]),this.query=d):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass("atwho-inserted")?r.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,r)&&this._setRange("after",this._unwrap(r.text(r.text()).contents().first()))),null)}},o.prototype.rect=function(){var e,n;return(n=this.query.el.offset())&&this.query.el[0].getClientRects().length?(this.app.iframe&&!this.app.iframeAsRoot&&(e=t(this.app.iframe).offset(),n.left+=e.left-this.$inputor.scrollLeft(),n.top+=e.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n):void 0},o.prototype.insert=function(t,e){var n,o,r,s,i;return this.$inputor.is(":focus")||this.$inputor.focus(),(o=this.getOpt("functionOverrides")).insert?o.insert.call(this,t,e):(s=""===(s=this.getOpt("suffix"))?s:s||" ",n=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+n["atwho-at"]+this.query.text).attr("contenteditable","false"),(r=this._getRange())&&(this.query.el.length&&r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(i=this.app.document.createTextNode(""+s)),this._setRange("after",i,r)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change())},o}(),h=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,o,r;return o=this.fetch(),r=this.context.getOpt("searchKey"),o=this.context.callbacks("filter").call(this.context,t,o,r)||[],n=this.context.callbacks("remoteFilter"),o.length>0||!n&&0===o.length?e(o):n.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),d=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),(t=this.context.getOpt("headerTpl"))&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,n,o;return e=this.$el.find("ul"),n=0,o=0,e.on("mousemove.atwho-view","li",function(r){var s;if((n!==r.clientX||o!==r.clientY)&&(n=r.clientX,o=r.clientY,!(s=t(r.currentTarget)).hasClass("cur")))return e.find(".cur").removeClass("cur"),s.addClass("cur")}).on("click.atwho-view","li",function(n){return function(o){return e.find(".cur").removeClass("cur"),t(o.currentTarget).addClass("cur"),n.choose(o),o.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(".cur").length>0},e.prototype.choose=function(t){var e,n;return(e=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,e,t),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var n,o,r,s;return n=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(n).scrollTop()>t(n).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(n).width()-this.$el.width()-5)&&(e.left=r),o={left:e.left,top:e.bottom},null!=(s=this.context.callbacks("beforeReposition"))&&s.call(this.context,o),this.$el.offset(o),this.context.trigger("reposition",[o])},e.prototype.next=function(){var t,e,n;return(t=this.$el.find(".cur").removeClass("cur").next()).length||(t=this.$el.find("li:first")),t.addClass("cur"),n=(e=t[0]).offsetTop+e.offsetHeight+(e.nextSibling?e.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,n;return(e=this.$el.find(".cur").removeClass("cur").prev()).length||(e=this.$el.find("li:last")),e.addClass("cur"),t=(n=e[0]).offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,t-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return(e=this.context.getOpt("scrollDuration"))?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,e))},e.prototype.render=function(e){var n,o,r,s,i,a,c;if(t.isArray(e)&&e.length>0){for(this.$el.find("ul").empty(),o=this.$el.find("ul"),c=this.context.getOpt("displayTpl"),r=0,i=e.length;i>r;r++)s=e[r],s=t.extend({},s,{"atwho-at":this.context.at}),a=this.context.callbacks("tplEval").call(this.context,c,s,"onDisplay"),(n=t(this.context.callbacks("highlighter").call(this.context,a,this.context.query.text))).data("item-data",s),o.append(n);return this.show(),this.context.getOpt("highlightFirst")?o.find("li:first").addClass("cur"):void 0}this.hide()},e}(),p={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t.fn.atwho=function(e){var n,s;return n=arguments,s=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var i,a;return(a=(i=t(this)).data("atwho"))||i.data("atwho",a=new o(this)),"object"!=(void 0===e?"undefined":r()(e))&&e?p[e]&&a?s=p[e].apply(a,Array.prototype.slice.call(n,1)):t.error("Method "+e+" does not exist on jQuery.atwho"):a.reg(e.at,e)}),null!=s?s:this},t.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",headerTpl:null,callbacks:e,functionOverrides:{},searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1},"function"==typeof define&&n("YV3B")?define(["jquery"],function(t){return e(t)}):"object"==("undefined"==typeof exports?"undefined":r()(exports))?t.exports=e(n("4kSj")):e(jQuery)}).call(e,n("wb6k")(t))},JhE6:function(t,e){},JwvE:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4FMX"),r=n("B2YR"),s=n.n(r),i=n("dXqY"),a={name:"Sidebar",computed:s()({},Object(i.b)(["curSidebar","conversations"]),{unreadCount:function(){var t=0;return this.conversations.map(function(e){t+=e.unreadMessageCount}),t}}),data:function(){return{showMenu:!1}},methods:{toggleSidebar:function(t){this.$store.commit("SET_CUR_SIDEBAR",t)}},mounted:function(){var t=this;this.globalClick(function(e){t.$refs.btnOperate&&!t.$refs.btnOperate.contains(e.target)&&(t.showMenu=!1)})}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-aside",{staticClass:"toolbar",staticStyle:{height:"100%",float:"left"},attrs:{width:"70px"}},[n("div",{staticClass:"bar-item",class:["Conversations"==t.curSidebar?"active":""],on:{click:function(e){t.toggleSidebar("Conversations")}}},[n("el-badge",{staticClass:"item",attrs:{value:t.unreadCount,max:999,hidden:!t.unreadCount}},[n("icon",{attrs:{name:"weixin"}})],1)],1),t._v(" "),n("div",{staticClass:"bar-item",class:["Contacts"==t.curSidebar?"active":""],on:{click:function(e){t.toggleSidebar("Contacts")}}},[n("icon",{attrs:{name:"address-book-o"}})],1),t._v(" "),n("div",{ref:"btnOperate",staticClass:"bar-item bottom",on:{click:function(e){t.showMenu=!t.showMenu}}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "),t.showMenu?n("div",{staticClass:"menu-block"},[n("ul",{staticClass:"menu-list"},[n("li",{staticClass:"menu-item"},[n("router-link",{staticClass:"menu",attrs:{to:{name:"SearchFriend"}}},[t._v("添加好友")])],1)])]):t._e()])])},staticRenderFns:[]};var u=n("U5Ua")(a,c,!1,function(t){n("zMm9")},"data-v-211b8bf4",null).exports;var l=n("qWzu"),h=n.n(l),d=function(t){return!!window.sessionStorage&&(Boolean(window.sessionStorage&&window.sessionStorage.hasOwnProperty(t))?JSON.parse(window.sessionStorage.getItem(t)):null)},p=function(t,e){return!!window.sessionStorage&&(window.sessionStorage.setItem(t,h()(e)),!0)},f=function(t){return Boolean(window.sessionStorage&&window.sessionStorage.hasOwnProperty(t))},g=function(){window.sessionStorage&&window.sessionStorage.clear()},m={name:"Contacts",data:function(){return{openeds:["1","2","3"],keyword:""}},computed:s()({},Object(i.b)(["myGroups","myFriends"]),{filterGroups:function(){var t=this;return this.myGroups.filter(function(e){return-1!==e.groupName.toLowerCase().indexOf(t.keyword.toLowerCase())})},filterFriends:function(){var t=this;return/[0-9]*/.test(this.keyword)&&10==this.keyword.length?this.myFriends.filter(function(e){return e.studentid==t.keyword}):this.myFriends.filter(function(e){return-1!==e.nickname.toLowerCase().indexOf(t.keyword.toLowerCase())})}}),filters:{toString:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString()}},created:function(){this.keyword=d("contact-keyword")||"",this.$store.dispatch("getMyFriends",{applyStatus:"passed"}).then(function(t){}),this.$store.dispatch("getMyGroups").then(function(t){})},beforeDestroy:function(){p("contact-keyword",this.keyword)},methods:{groupByZh:function(t){return function(t){if(!String.prototype.localeCompare)return null;var e="*abcdefghjklmnopqrstwxyz".split(""),n="阿八嚓哒妸发旮哈讥咔垃麻拏噢妑七呥扨它穵夕丫帀".split(""),o=[],r=void 0;return e.forEach(function(e,s){r={letter:e,data:[]},t.forEach(function(t){(!n[s-1]||n[s-1].localeCompare(t.nickname,"zh-Hans-CN",{sensitivity:"accent"})<=0)&&-1===t.nickname.localeCompare(n[s],"zh-Hans-CN",{sensitivity:"accent"})&&r.data.push(t)}),r.data.length&&(o.push(r),r.data.sort(function(t,e){return t.nickname.localeCompare(e.nickname,"zh-Hans-CN",{sensitivity:"accent"})}))}),o}(t)},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-aside",{staticClass:"contacts-bar",staticStyle:{height:"100%"},attrs:{width:"330px"}},[n("div",[n("el-row",{staticClass:"tac"},[n("el-col",{attrs:{span:24}},[n("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":"1",router:!0,"default-openeds":t.openeds},on:{open:t.handleOpen,close:t.handleClose}},[n("el-menu-item",{attrs:{index:"1",disabled:!0}},[n("el-input",{attrs:{placeholder:"用户名/学号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[n("span",[t._v("群组")])]),t._v(" "),n("el-menu-item-group",{key:"group"},[t._l(t.filterGroups,function(e,o){return[n("el-menu-item",{key:e.groupId,attrs:{route:{name:"GroupInfo",params:{groupId:e.groupId}},index:t._f("toString")(e.groupId)}},[t._v(t._s(e.groupName))])]})],2)],2),t._v(" "),n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[n("span",[t._v("联系人")])]),t._v(" "),t._l(t.groupByZh(t.filterFriends),function(e,o){return[n("el-menu-item-group",{key:e.letter},[n("template",{slot:"title"},[t._v(t._s(e.letter))]),t._v(" "),t._l(e.data,function(e,o){return[n("el-menu-item",{key:e.friendUserId,attrs:{route:{name:"UserInfo",params:{userId:e.friendUserId}},index:t._f("toString")(e.friendUserId)}},[t._v(t._s(e.nickname))])]})],2)]})],2)],1)],1)],1)],1)])},staticRenderFns:[]};var y=n("U5Ua")(m,v,!1,function(t){n("ReEe")},"data-v-349dc85c",null).exports,I=n("k5fI"),b={name:"ConversationItem",props:["conversation"],data:function(){return{}},computed:s()({},Object(i.b)(["objGroups","objFriends","userId"]),{info:function(){var t=this.conversation,e={targetId:t.targetId,conversationType:t.conversationType,sentTime:t.latestMessage.sentTime,unreadMessageCount:t.unreadMessageCount,latestMessage:t.latestMessage};switch(t.conversationType){case 1:e.isExist=!!this.objFriends[t.targetId],e.headimgurl=this.objFriends[t.targetId]&&this.objFriends[t.targetId].headimgurl,e.nickname=this.objFriends[t.targetId]&&this.objFriends[t.targetId].nickname;break;case 3:e.isExist=!!this.objGroups[t.targetId],e.headimgurl=this.objGroups[t.targetId]&&this.objGroups[t.targetId].groupHeadimgurl,e.nickname=this.objGroups[t.targetId]&&this.objGroups[t.targetId].groupName}var n=t.latestMessage.content;switch(t.latestMessage.objectName){case"RC:TxtMsg":var o=n.content.replace(/</gi,"&lt;").replace(/>/gi,"&gt;");RongIMLib.RongIMEmoji&&RongIMLib.RongIMEmoji.emojiToHTML&&(o=RongIMLib.RongIMEmoji.emojiToHTML(o)),e.msgContent=o;break;case"RC:ImgMsg":e.msgContent="[图片]";break;case"RC:VcMsg":e.msgContent="[语音]";break;case"RC:ImgTextMsg":e.msgContent="[图文]";break;case"RC:LBSMsg":e.msgContent="[位置]";break;case"RC:FileMsg":e.msgContent="[文件]";break;case"RC:CmdNtf":case"RC:ContactNtf":e.msgContent="[通知消息]";break;case"RC:RcCmd":e.msgContent="[一条消息被撤回]";break;case"RC:InfoNtf":case"RC:GrpNtf":e.msgContent=n.message}return e.latestMessage.content=n,e}}),filters:{humanizeTime:function(t,e){var n="";return e&&t-e<18e4?n:n=I(I(t).format("YYYY-MM-DD HH:mm:ss")).isBetween(I().format("YYYY-MM-DD"),I().format("YYYY-MM-DD HH:mm:ss"))?I(t).format("HH:mm"):I(t).format("M-D")}},created:function(){}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.info.isExist?n("router-link",{staticClass:"conversation",attrs:{to:{name:"Chat",params:{targetId:t.info.targetId,conversationType:t.info.conversationType}}}},[n("div",{staticClass:"face"},[n("img",{attrs:{src:t.info.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(t._s(t.info.nickname))]),t._v(" "),n("div",{staticClass:"msg",domProps:{innerHTML:t._s(t.info.msgContent)}})]),t._v(" "),n("div",{staticClass:"extra"},[n("div",{staticClass:"date"},[t._v(t._s(t._f("humanizeTime")(t.info.sentTime)))]),t._v(" "),t.info.unreadMessageCount?n("div",{staticClass:"num"},[t._v(t._s(t.info.unreadMessageCount))]):t._e()])]):t._e()},staticRenderFns:[]};var _=n("U5Ua")(b,C,!1,function(t){n("39eq")},"data-v-3b41d226",null).exports,T=n("k5fI"),w={name:"Conversations",components:{ConversationItem:_},computed:s()({},Object(i.b)(["conversations","objGroups","objFriends"])),data:function(){return{myConversations:function(){}}},filters:{humanizeTime:function(t,e){var n="";return e&&t-e<18e4?n:n=T(T(t).format("YYYY-MM-DD HH:mm:ss")).isBetween(T().format("YYYY-MM-DD"),T().format("YYYY-MM-DD HH:mm:ss"))?T(t).format("HH:mm"):T(t).format("M-D")}},created:function(){this.$store.dispatch("getMyFriends",{applyStatus:"passed"}).then(function(t){}),this.$store.dispatch("getMyGroups").then(function(t){})}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-aside",{staticClass:"conversations-bar",staticStyle:{height:"100%"},attrs:{width:"330px"}},[e("ul",{staticClass:"conversation-list"},this._l(this.conversations,function(t,n){return e("li",{key:n,staticClass:"conversation-item"},[e("conversation-item",{attrs:{conversation:t}})],1)}))])},staticRenderFns:[]};var k=n("U5Ua")(w,R,!1,function(t){n("4OVt")},"data-v-068a45da",null).exports,M={},E=n("Hcuw"),S=n.n(E),j=n("h8zl"),O=n.n(j),N=n("mrFq"),$=n.n(N),U=n("zL8q"),F=n.n(U),D=$.a.create({baseURL:"/api",timeout:12e5});D.interceptors.request.use(function(t){return t.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",t.headers.token=nt.getters.token,t.headers.userId=nt.getters.userId,f("is-login")||(t.headers["token-login"]=1),t},function(t){console.log(t),S.a.reject(t)}),D.interceptors.response.use(function(t){if(!t.data||!t.data.code)return console.log(t),t.data;if(-1!==[410].indexOf(t.data.code))location.href="http://www2.btclass.cn/admin/sealtalk";else if(200!==t.data.code)return Object(U.Message)({message:t.data.tip||t.data.msg,type:"error",duration:5e3}),S.a.reject(t.data);return f("is-login")||p("is-login",1),t.data.res},function(t){return console.log(t),Object(U.Message)({message:t.message||"网络异常",type:"error",duration:5e3}),S.a.reject(t)});var G=D;function L(t){return G({url:"/users/search",method:"get",params:{target:t}})}var A={state:{myFriends:[],objFriends:{},friendInfo:{}},mutations:{SET_MY_FRIENDS:function(t,e){t.myFriends=e},SET_OBJ_FRIENDS:function(t,e){var n=!0,r=!1,s=void 0;try{for(var i,a=O()(e);!(n=(i=a.next()).done);n=!0){var c=i.value;o.default.set(t.objFriends,c.friendUserId,c)}}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}},UPDATE_OBJ_FRIENDS:function(t,e){o.default.set(t.objFriends,e.userId,e)},SET_FRIEND_INFO:function(t,e){t.friendInfo=e}},actions:{getMyFriends:function(t,e){var n=t.commit,o=t.state;if(o.myFriends&&o.myFriends.length)return S.a.resolve(o.myFriends);(function(t){return G({url:"/friends",method:"get",params:{applyStatus:t.applyStatus}})})(e).then(function(t){return n("SET_MY_FRIENDS",t),n("SET_OBJ_FRIENDS",t),t})},getFriendInfo:function(t,e){var n=t.commit,o=t.state;return o.objFriends[e.userId]?S.a.resolve(o.objFriends[e.userId]):function(t){return G({url:"/users/"+t.userId+"/profile",method:"get",params:{groupId:t.groupId}})}(e).then(function(t){return n("SET_FRIEND_INFO",t),n("UPDATE_OBJ_FRIENDS",t),t})},applyFriend:function(t,e){t.commit,t.state;return function(t){return G({url:"/friends/apply",method:"post",data:{friendUserId:t.friendUserId,applyReason:t.applyReason,remark:t.remark,applyFrom:t.applyFrom,fromRemark:t.fromRemark}})}(e).then(function(t){return t})}},getters:{myFriends:function(t){return t.myFriends},objFriends:function(t){return t.objFriends}}},P=n("Bm5P"),B=n.n(P),H=n("mOK0"),z=n.n(H);var Y={state:{myGroups:[],objGroups:{}},mutations:{SET_MY_GROUPS:function(t,e){t.myGroups=e},SET_OBJ_GROUPS:function(t,e){var n=!0,r=!1,s=void 0;try{for(var i,a=O()(e);!(n=(i=a.next()).done);n=!0){var c=i.value;t.objGroups[c.groupId]?t.objGroups[c.groupId]=z()({},t.objGroups[c.groupId],c):o.default.set(t.objGroups,c.groupId,c)}}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}},DELETE_OBJ_GROUPS_ITEM:function(t,e){var n=B()(e,2),o=n[0],r=n[1];delete t.objGroups[o][r]},SET_GROUP_MEMBERS:function(t,e){var n=B()(e,2),r=n[0],s=n[1];t.objGroups[r]||o.default.set(t.objGroups,r,{}),o.default.set(t.objGroups[r],"members",s)},SET_GROUP_INFO:function(t,e){var n=B()(e,2),r=n[0],s=n[1];t.objGroups[r]||o.default.set(t.objGroups,r,{}),t.objGroups[r]=z()({},t.objGroups[r],s),o.default.set(t.objGroups[r],"info",s)},SET_MY_GROUP_SETTING:function(t,e){var n=B()(e,2),r=n[0],s=n[1];t.objGroups[r]||o.default.set(t.objGroups,r,{}),o.default.set(t.objGroups[r],"mySetting",s)}},actions:{getMyGroups:function(t){var e=t.commit,n=t.state;return n.myGroups&&n.myGroups.length?S.a.resolve(n.myGroups):G({url:"/groups/list/self",method:"get"}).then(function(t){return e("SET_MY_GROUPS",t),e("SET_OBJ_GROUPS",t),t})},getGroupInfo:function(t,e){var n=t.commit,o=t.state;return o.objGroups[e]&&o.objGroups[e].info?o.objGroups[e].info:function(t){return G({url:"/groups/"+t+"/info",method:"get"})}(e).then(function(t){return n("SET_GROUP_INFO",[e,t[0]]),t[0]})},getGroupMembers:function(t,e){var n=t.commit,o=t.state;return o.objGroups[e]&&o.objGroups[e].members?o.objGroups[e].members:function(t){return G({url:"/groups/"+t+"/members",method:"get"})}(e).then(function(t){return n("SET_GROUP_MEMBERS",[e,t]),t})},kickingMembers:function(t,e){var n=t.commit,o=B()(e,2),r=o[0],s=o[1];return function(t,e){return G({url:"/groups/"+t+"/kicking",method:"delete",data:{userIds:e.userIds}})}(r,s).then(function(t){return n("DELETE_OBJ_GROUPS_ITEM",[r,"members"]),t})},joinMembers:function(t,e){var n=t.commit,o=B()(e,2),r=o[0],s=o[1];return function(t,e){return G({url:"/groups/"+t+"/join",method:"post",data:e})}(r,s).then(function(t){return n("DELETE_OBJ_GROUPS_ITEM",[r,"members"]),t})},getMyGroupSetting:function(t,e){var n=t.commit,o=t.state;return o.objGroups[e]&&o.objGroups[e].mySetting?o.objGroups[e].mySetting:function(t){return G({url:"/groups/"+t+"/mysetting",method:"get"})}(e).then(function(t){return n("SET_MY_GROUP_SETTING",[e,t]),t})},updateGroupSetting:function(t,e){var n,o,r=t.dispatch;return(n=e.groupId,o=e,G({url:"/groups/"+n+"/mysetting",method:"post",data:o})).then(function(t){return r("getGroupInfo",e.groupId),t})}},getters:{myGroups:function(t){return t.myGroups},objGroups:function(t){return t.objGroups}}},q=function(t){return!!window.localStorage&&(Boolean(window.localStorage&&window.localStorage.hasOwnProperty(t))?JSON.parse(window.localStorage.getItem(t)):null)},V=function(t,e){return!!window.localStorage&&(window.localStorage.setItem(t,h()(e)),!0)},Q=function(){window.localStorage&&window.localStorage.clear()};var W={state:{token:"",userId:0,userInfo:{},curSidebar:""},mutations:{SET_TOKEN:function(t,e){t.token=e,V("token",e)},SET_USER_ID:function(t,e){t.userId=e,V("userId",e)},SET_USER_INFO:function(t,e){t.userInfo=e},SET_CUR_SIDEBAR:function(t,e){p("curSidebar",e),t.curSidebar=e}},actions:{getUserProfile:function(t){var e=t.commit,n=t.state;return n.userInfo&&n.userInfo.userId?S.a.resolve(n.userInfo):G({url:"/users/"+nt.getters.userId+"/profile",method:"get"}).then(function(t){return e("SET_USER_INFO",t),t})}},getters:{token:function(t){return t.token||q("token")||""},userId:function(t){return t.userId||q("userId")||0},userInfo:function(t){return t.userInfo},curSidebar:function(t){return t.curSidebar||d("curSidebar")||"Conversations"}}},K=n("Kq7y"),J=n.n(K),Z={1:RongIMLib.ConversationType.PRIVATE,2:RongIMLib.ConversationType.DISCUSSION,3:RongIMLib.ConversationType.GROUP,4:RongIMLib.ConversationType.CHATROOM,5:RongIMLib.ConversationType.CUSTOMER_SERVICE,6:RongIMLib.ConversationType.SYSTEM,7:RongIMLib.ConversationType.APP_PUBLIC_SERVICE,8:RongIMLib.ConversationType.PUBLIC_SERVICE};var X=function(t,e,n,o){var r=Z[t];return new S.a(function(t,s){RongIMClient.getInstance().sendMessage(r,e,n,{onSuccess:function(e){console.log("Send successfully"),t(e)},onError:function(t,e){var n="";switch(t){case RongIMLib.ErrorCode.TIMEOUT:n="超时";break;case RongIMLib.ErrorCode.UNKNOWN_ERROR:n="未知错误";break;case RongIMLib.ErrorCode.REJECTED_BY_BLACKLIST:n="在黑名单中，无法向对方发送消息";break;case RongIMLib.ErrorCode.NOT_IN_DISCUSSION:n="不在讨论组中";break;case RongIMLib.ErrorCode.NOT_IN_GROUP:n="不在群组中";break;case RongIMLib.ErrorCode.NOT_IN_CHATROOM:n="不在聊天室中";break;default:n=x}console.log("发送失败:"+n),Object(U.Message)({message:"发送失败:"+n,type:"error",duration:5e3}),s(n)}},o)})},tt={state:{rcToken:"",initStatus:!1,unreadCount:0,conversations:[],curConversation:{conversationType:0,targetId:0,hasMsg:!0,histories:[],newMsg:0},rcHistories:{}},mutations:{SET_RC_TOKEN:function(t,e){t.rcToken=e},SET_INIT_STATUS:function(t,e){t.initStatus=e},SET_UNREAD_COUNT:function(t,e){t.unreadCount=e},RESET_UNREAD_COUNT:function(t){var e=0;t.conversations.map(function(t){e+=t.unreadMessageCount}),t.unreadCount=e},UPDATE_UNREAD_COUNT:function(t,e){t.unreadCount=t.unreadCount+e},SET_CONVERSATIONS:function(t,e){t.conversations=e},SET_CUR_CONVERSATION:function(t,e){t.curConversation=z()({},t.curConversation,e)},ADD_OLD_HISTORY:function(t,e){var n,o=B()(e,2),r=o[0],s=o[1];(n=t.curConversation.histories).unshift.apply(n,J()(r)),t.curConversation.hasMsg=s},ADD_NEW_HISTORY:function(t,e){t.curConversation.histories.push(e);var n=e.conversationType+"-"+e.targetId;t.rcHistories[n]?t.rcHistories[n].histories.push(e):t.rcHistories[n]={histories:[e],hasMsg:!0}},ADD_CONVERSATIONS:function(t,e){t.conversations.push(e)},CLEAR_UNREAD_COUNT:function(t,e){for(var n in t.conversations)if(t.conversations[n].targetId==e.targetId){t.conversations[n].unreadCount=0;break}},RECEIVE_NEW_MESSAGE:function(t,e){if("RC:TypSts"!=e.objectName){console.log("---RECEIVE_NEW_MESSAGE---");for(var n in t.conversations)if(t.conversations[n].targetId==e.targetId){n,t.conversations[n].latestMessage=e,t.conversations[n].sentTime=e.sentTime,t.conversations[n].sentStatus=e.sentStatus,t.conversations[n].objectName=e.objectName,t.conversations[n].notificationStatus=e.sentStatus,t.conversations[n].latestMessageId=e.messageId,"RC:InfoNtf"==e.objectName&&t.conversations[n]&&t.conversations[n].unreadMessageCount&&t.conversations[n].unreadMessageCount--;break}t.curConversation.targetId==e.targetId&&(t.curConversation.histories.push(e),t.curConversation.newMsg++);var o=e.conversationType+"-"+e.targetId;t.rcHistories[o]?t.rcHistories[o].histories.push(e):t.rcHistories[o]={histories:[e],hasMsg:!0},console.log("histories.length",t.curConversation.histories.length)}},SET_HISTORIES:function(t,e){var n,o=e.conversationType+"-"+e.targetId;t.rcHistories[o]?((n=t.rcHistories[o].histories).unshift.apply(n,J()(e.histories)),t.rcHistories[o].hasMsg=e.hasMsg):t.rcHistories[o]={histories:e.histories,hasMsg:e.hasMsg}}},actions:{getRCToken:function(t){var e=t.commit,n="rcToken";return f(n)?(e("SET_RC_TOKEN",d(n)),S.a.resolve(d(n))):G({url:"/users/token",method:"get"}).then(function(t){return e("SET_RC_TOKEN",t.token),p(n,t.token),t.token})},getHistoryMsg:function(t,e){var n=t.commit,o=t.state,r=o.curConversation.conversationType+"-"+o.curConversation.targetId;return o.rcHistories[r]&&e.first?(n("SET_CUR_CONVERSATION",JSON.parse(h()(o.rcHistories[r]))),S.a.resolve(o.curConversation)):o.curConversation.histories&&!o.curConversation.hasMsg?S.a.resolve(o.curConversation):function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,r=Z[t];return new S.a(function(t,s){RongIMLib.RongIMClient.getInstance().getHistoryMessages(r,e,n,o,{onSuccess:function(e,n){t([e,n])},onError:function(t){console.log("GetHistoryMessages,errorcode:"+t),s(t)}})})}(o.curConversation.conversationType,o.curConversation.targetId,e.timestramp,e.limit).then(function(t){var e=B()(t,2),r=e[0],s=e[1];return n("ADD_OLD_HISTORY",[r,s]),n("SET_HISTORIES",{conversationType:o.curConversation.conversationType,targetId:o.curConversation.targetId,histories:r,hasMsg:s}),o.curConversation})},sendTextMsg:function(t,e){var n,o,r,s,i,a=t.commit;t.state;return(n=e.conversationType,o=e.targetId,r=e.message,s=e.at,i=new RongIMLib.TextMessage(r),X(n,o,i,s).then(function(t){return t})).then(function(t){return a("ADD_NEW_HISTORY",t),t})},sendImageMsg:function(t,e){var n,o,r,s,i,a=t.commit;t.state;return(n=e.conversationType,o=e.targetId,r=e.message,s=e.at,i=new RongIMLib.ImageMessage(r),X(n,o,i,s).then(function(t){return t})).then(function(t){return a("ADD_NEW_HISTORY",t),t})},clearUnreadCount:function(t,e){var n,o,r,s=t.commit;return(n=e.conversationType,o=e.targetId,r=Z[n],new S.a(function(t,e){RongIMClient.getInstance().clearUnreadCount(r,o,{onSuccess:function(){t()},onError:function(t){e(t)}})})).then(function(){return s("CLEAR_UNREAD_COUNT",e),!0})}},getters:{rcToken:function(t){return t.rcToken},initStatus:function(t){return t.initStatus},unreadCount:function(t){return t.unreadCount},conversations:function(t){return t.conversations},curConversation:function(t){return t.curConversation},rcHistories:function(t){return t.rcHistories}}};o.default.use(i.a);var et=new i.a.Store({modules:{friend:A,group:Y,user:W,rc:tt},getters:M});et.subscribe(function(t,e){"RECEIVE_NEW_MESSAGE"==t.type&&e.rc.curConversation.targetId==t.payload.targetId&&et.dispatch("clearUnreadCount",e.rc.curConversation).then(function(t){})});var nt=et;function ot(t,e,n){var o=t.appKey,r=t.token,s=t.navi||"",i=(n=n||{}).RongIMLib||window.RongIMLib,a=i.RongIMClient,c=n.protobuf||null,u={};""!==s&&(u.navi=s);var l=t.api||"";""!==l&&(u.api=l),null!=c&&(u.protobuf=c),i.RongIMClient.init(o,null,u);var h=a.getInstance();a.setConnectionStatusListener({onChanged:function(t){switch(console.log(t),t){case i.ConnectionStatus.CONNECTED:case 0:console.log("连接成功"),e.getInstance&&e.getInstance(h);break;case i.ConnectionStatus.CONNECTING:case 1:console.log("连接中");break;case i.ConnectionStatus.DISCONNECTED:case 2:console.log("当前用户主动断开链接");break;case i.ConnectionStatus.NETWORK_UNAVAILABLE:case 3:console.log("网络不可用"),Object(U.Message)({message:"网络不可用",type:"error",duration:5e3});break;case i.ConnectionStatus.CONNECTION_CLOSED:case 4:console.log("未知原因，连接关闭"),Object(U.Message)({message:"未知原因，连接关闭，重新连接中",type:"error",duration:5e3}),function(){var t=window.RongIMLib,e=t.RongIMClient,n=(new Date).getTime();(new Date).getTime();e.reconnect({onSuccess:function(t){nt.commit("SET_INIT_STATUS",!0),console.log("重新链接 成功，用户id："+t+"; "+n),Object(U.Message)({message:"重新链接 成功",type:"success",duration:5e3})},onTokenIncorrect:function(){console.log("重新链接 失败 token无效",n),Object(U.Message)({message:"重新链接 失败 token无效",type:"error",duration:5e3})},onError:function(e){var n="";switch(e){case t.ErrorCode.TIMEOUT:n="超时";break;case t.ErrorCode.UNKNOWN_ERROR:n="未知错误";break;case t.ErrorCode.UNACCEPTABLE_PROTOCOL_VERSION:n="不可接受的协议版本";break;case t.ErrorCode.IDENTIFIER_REJECTED:n="appkey不正确";break;case t.ErrorCode.SERVER_UNAVAILABLE:n="服务器不可用"}console.log(n),Object(U.Message)({message:n,type:"error",duration:5e3})}})}();break;case i.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:case 6:console.log("用户账户在其他设备登录，本机会被踢掉线"),Object(U.Message)({message:"用户账户在其他设备登录，本机会被踢掉线",type:"error",duration:5e3});break;case i.ConnectionStatus.DOMAIN_INCORRECT:case 12:console.log("当前运行域名错误，请检查安全域名配置")}}}),a.setOnReceiveMessageListener({onReceived:function(t){switch(t.messageType){case a.MessageType.TextMessage:case a.MessageType.VoiceMessage:case a.MessageType.ImageMessage:case a.MessageType.RichContentMessage:case a.MessageType.DiscussionNotificationMessage:case a.MessageType.LocationMessage:case a.MessageType.InformationNotificationMessage:case a.MessageType.ContactNotificationMessage:case a.MessageType.ProfileNotificationMessage:case a.MessageType.CommandNotificationMessage:case a.MessageType.CommandMessage:case a.MessageType.UnknownMessage:}e.receiveNewMessage&&e.receiveNewMessage(t)}}),a.connect(r,{onSuccess:function(t){e.getCurrentUser&&e.getCurrentUser({userId:t}),console.log("链接成功，用户id："+t),nt.commit("SET_INIT_STATUS",!0)},onTokenIncorrect:function(){console.log("token无效"),Object(U.Message)({message:"token无效，请不要在多个处登陆",type:"error",duration:5e3})},onError:function(t){console.log(t)}})}var rt={name:"App",components:{Sidebar:u,Contacts:y,Conversations:k},computed:s()({},Object(i.b)(["rcToken","curSidebar"])),methods:{},created:function(){var t=this;this.$store.dispatch("getUserProfile").then(function(t){}),this.$store.dispatch("getRCToken").then(function(e){var n=t;ot({appKey:"sfci50a7s4woi",token:t.rcToken},{getInstance:function(e){console.log("---instance---"),new S.a(function(t,e){RongIMClient.getInstance().getConversationList({onSuccess:function(e){t(e)},onError:function(t){e(t)}},null)}).then(function(e){t.$store.commit("SET_CONVERSATIONS",e)}),new S.a(function(t,e){RongIMClient.getInstance().getTotalUnreadCount({onSuccess:function(e){t(e)},onError:function(t){e(t)}})}).then(function(e){t.$store.commit("SET_UNREAD_COUNT",e)})},receiveNewMessage:function(t){console.log("---receiveNewMessage---message:",t),n.$store.commit("RECEIVE_NEW_MESSAGE",t)},getCurrentUser:function(t){t.userId}})})}},st={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{attrs:{id:"app"}},[e("el-aside",{staticStyle:{overflow:"hidden"},attrs:{width:"400px"}},[e("Sidebar"),this._v(" "),e(this.curSidebar,{tag:"component"})],1),this._v(" "),e("el-main",[e("router-view")],1)],1)},staticRenderFns:[]};var it=n("U5Ua")(rt,st,!1,function(t){n("SzRh")},null,null).exports,at=n("byqf"),ct={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var ut=n("U5Ua")({name:"Index",data:function(){return{}}},ct,!1,function(t){n("Pl+j")},"data-v-1dd4d75a",null).exports,lt={name:"UserInfo",components:{},props:["userId","applyFrom","fromRemark"],data:function(){return{conversationType:"1",friendInfo:{}}},created:function(){this.fetchUserInfo()},methods:{fetchUserInfo:function(){var t=this,e={userId:this.userId};this.$store.dispatch("getFriendInfo",e).then(function(e){t.friendInfo=e})},toChat:function(){this.$router.push({name:"Chat",params:{conversationType:this.conversationType,targetId:this.userId}})},back:function(){history.back()},toApplyFriend:function(){this.$router.push({name:"ApplyFriend",params:{friendUserId:this.userId},query:{applyFrom:this.applyFrom,fromRemark:this.fromRemark}})}},watch:{userId:function(t){this.fetchUserInfo()}}},ht={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",{staticClass:"title"},[t._v("好友信息")])],1),t._v(" "),n("el-main",[n("div",{staticClass:"user-info"},[n("div",{staticClass:"user-data"},[n("div",{staticClass:"photo"},[n("img",{attrs:{src:t.friendInfo.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("h3",{staticClass:"username"},[t._v(t._s(t.friendInfo.nickname))]),t._v(" "),n("p",{staticClass:"studentid"},[t._v(t._s(t.friendInfo.studentid))])])])]),t._v(" "),t.friendInfo.isFriend||"passed"==t.friendInfo.applyStatus?n("div",{staticClass:"operate-block"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.toChat()}}},[t._v("发消息")])],1):n("div",{staticClass:"operate-block"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.toApplyFriend()}}},[t._v("申请好友")])],1)])],1)},staticRenderFns:[]};var dt=n("U5Ua")(lt,ht,!1,function(t){n("eQon")},"data-v-39e22dc0",null).exports,pt={name:"GroupInfo",components:{},props:["groupId"],data:function(){return{conversationType:"3",groupInfo:{},groupMembers:[],myGroupSetting:{},dialogFormVisible:!1,form:{userId:"",target:"",user:{}}}},computed:{isManage:function(){return this.$route.meta.isManage||!1},roles:function(){return this.$route.meta.roles||[]}},created:function(){this.fetchGroupInfo()},methods:{fetchGroupInfo:function(){var t=this;this.$store.dispatch("getGroupInfo",this.groupId).then(function(e){t.groupInfo=e}),this.$store.dispatch("getGroupMembers",this.groupId).then(function(e){t.groupMembers=e}),this.$store.dispatch("getMyGroupSetting",this.groupId).then(function(e){t.myGroupSetting=e})},kickingMember:function(t,e){var n=this;this.$confirm("确定踢出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={userIds:[t.userId]};n.$store.dispatch("kickingMembers",[n.groupId,o]).then(function(t){n.groupMembers.splice(e,1),n.groupInfo.num--,n.$message({type:"success",message:"踢出群聊成功!"})})})},addMember:function(){var t=this,e={userIds:[this.form.userId]};this.$store.dispatch("joinMembers",[this.groupId,e]).then(function(e){t.groupMembers.push(t.form.user),t.groupInfo.num++,t.dialogFormVisible=!1,t.$message({type:"success",message:"添加成功!"}),t.form={userId:"",target:"",user:{}}})},toChat:function(){this.$router.push({name:"Chat",params:{conversationType:this.conversationType,targetId:this.groupId}})},toBulletin:function(){this.$router.push({name:"Bulletin",params:{groupId:this.groupId}})},toManage:function(){this.$router.push({name:"GroupInfoManage",params:{groupId:this.groupId}})},back:function(){history.back()}},watch:{groupId:function(){this.fetchGroupInfo()},"form.target":function(t,e){var n=this;t&&t.length>=10&&t.length<=11?L(t).then(function(t){t&&t.length>0?(n.form.userId=t[0].userId,n.form.user=t[0]):(n.form.userId=0,n.form.user=null)}):(this.form.userId=0,this.form.user=null)}}},ft={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",{staticClass:"title"},[t._v("群资料")]),t._v(" "),!t.isManage&&t.roles.indexOf(t.myGroupSetting.role)>-1?n("el-button",{staticClass:"btn-right",attrs:{icon:"el-icon-setting"},on:{click:function(e){t.toManage()}}}):t._e()],1),t._v(" "),n("el-main",[n("div",{staticClass:"user-info"},[n("div",{staticClass:"group-data"},[n("div",{staticClass:"photo"},[n("img",{attrs:{src:t.groupInfo.groupHeadimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("h3",{staticClass:"name"},[t._v(t._s(t.groupInfo.groupName))]),t._v(" "),n("p",{staticClass:"num"},[t._v("群成员 "+t._s(t.groupInfo.num)+" 人")])])])]),t._v(" "),t.isManage?t._e():n("div",{staticClass:"operate-block"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.toChat()}}},[t._v("发群聊")])],1),t._v(" "),t.isManage?t._e():n("div",{staticClass:"operate-block"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.toBulletin()}}},[t._v("群公告")])],1),t._v(" "),t.isManage&&t.roles.indexOf(t.myGroupSetting.role)>-1?n("div",{staticClass:"operate-block"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加新成员")])],1):t._e(),t._v(" "),n("ul",{staticClass:"group-member-list"},t._l(t.groupMembers,function(e,o){return n("li",{key:e.userId,staticClass:"group-member-item"},[n("router-link",{staticClass:"member-card",attrs:{to:{name:"UserInfo",params:{userId:e.userId},query:{applyFrom:"group",fromRemark:t.groupId}}}},[n("div",{staticClass:"face"},[n("img",{attrs:{src:e.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(t._s(e.nickname))]),t._v(" "),e.groupNickname?n("span",{staticClass:"group-name"},[t._v("("+t._s(e.groupNickname)+")")]):t._e(),t._v(" "),e.roleName?n("el-tag",{attrs:{type:"success",size:"small"}},[t._v(t._s(e.roleName))]):t._e()],1),t._v(" "),t.isManage&&t.roles.indexOf(t.myGroupSetting.role)>-1?n("div",{staticClass:"operate"},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:!0},on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.kickingMember(e,o)}}})],1):t._e()])],1)})),t._v(" "),t.isManage&&t.roles.indexOf(t.myGroupSetting.role)>-1?n("el-dialog",{attrs:{title:"添加新成员",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"学号/手机号","auto-complete":"off"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}})],1),t._v(" "),t.form.userId?n("div",{staticClass:"friend"},[n("div",{staticClass:"face"},[n("img",{attrs:{src:t.form.user.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name",domProps:{textContent:t._s(t.form.user.nickname)}}),t._v(" "),n("div",{staticClass:"studentid",domProps:{textContent:t._s(t.form.user.studentid)}})])]):t._e()],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:!t.form.userId},on:{click:t.addMember}},[t._v("确 定")])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var gt=n("U5Ua")(pt,ft,!1,function(t){n("oFGS")},"data-v-4f931ddf",null).exports,mt={name:"Emoji",props:{value:Boolean},data:function(){return{emojoList:{}}},created:function(){this.emojoList=RongIMLib.RongIMEmoji.list},methods:{symbolToHTML:function(t){if(RongIMLib.RongIMEmoji&&RongIMLib.RongIMEmoji.symbolToHTML)return RongIMLib.RongIMEmoji.symbolToHTML(t)},handleInput:function(t){this.$emit("execCommandEmojo",t.symbol)}},mounted:function(){var t=this;this.globalClick(function(e){t.$refs.emojoBox&&!t.$refs.emojoBox.contains(e.target)&&(console.log("globalClick-update:value"),t.$emit("update:value",!1))})}},vt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value?n("div",{ref:"emojoBox",staticClass:"emojo-box"},[t._l(t.emojoList,function(e,o){return[n("span",{staticClass:"emojo",domProps:{innerHTML:t._s(t.symbolToHTML(e.symbol))},on:{click:function(n){t.handleInput(e)}}})]})],2):t._e()},staticRenderFns:[]};var yt=n("U5Ua")(mt,vt,!1,function(t){n("2gkG")},"data-v-3b6bc5b9",null).exports;var It=n("U7mS"),bt={name:"RcImage",props:{},computed:s()({},Object(i.b)(["userId"])),data:function(){return{percentage:0,image:{key:"",content:"",imageUri:""}}},created:function(){},methods:{uploadToQiniu:function(t){var e=this,n=t.target.files[0];n&&It(n).then(function(t){var o=new FormData;o.append("file",t.file,n.name),G({url:"/qinius/token",method:"get"}).then(function(r){o.append("token",r.token),o.append("key","sealtalk/"+e.userId+"/"+n.name);$.a.post("https://upload.qiniu.com/",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){console.log("-----上传图片成功---",n),e.image.key=n.data.key,e.image.imageUri=n.data.url,e.image.content=t.base64.replace("data:image/jpeg;base64,",""),e.$emit("execCommandImage",e.image)}).catch(function(t){console.log("-----上传图片失败---",t)})}).catch(function(t){console.log("获取token失败",t)})}).catch(function(t){console.log("压缩图片失败",t)})}}},Ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"choice-block"},[e("input",{staticClass:"choice-image",attrs:{id:"file",type:"file",accept:"image/*"},on:{change:this.uploadToQiniu}}),this._v(" "),e("label",{staticClass:"file-label",attrs:{for:"file"}},[e("icon",{attrs:{name:"image"}})],1)])},staticRenderFns:[]};var _t=n("U5Ua")(bt,Ct,!1,function(t){n("g3V2")},"data-v-73dfe616",null).exports,Tt=(n("k5fI"),{name:"Message",props:{rcMessage:{type:Object,default:{}},owner:{type:Object,default:{}},isMe:{type:Boolean}},data:function(){return{isPlayVoice:!1}},computed:{handledMessage:function(){var t=this.rcMessage,e=t.content;switch(t.objectName){case"RC:TxtMsg":var n=e.content.replace(/</gi,"&lt;").replace(/>/gi,"&gt;");RongIMLib.RongIMEmoji&&RongIMLib.RongIMEmoji.emojiToHTML&&(n=RongIMLib.RongIMEmoji.emojiToHTML(n)),t.html=n;break;case"RC:ImgMsg":t.html="data:image/png;base64,"+e.content;break;case"RC:VcMsg":t.html="[语音]";break;case"RC:ImgTextMsg":t.html="[图文]";break;case"RC:LBSMsg":t.html="[位置]";break;case"RC:FileMsg":t.html="[文件]";break;case"RC:CmdNtf":case"RC:ContactNtf":t.html="[通知消息]";break;case"RC:InfoNtf":case"RC:GrpNtf":t.html=e.message;break;case"RC:DizNtf":break;case"RC:RcCmd":t.html="消息被撤回"}return t}},created:function(){},methods:{previewImage:function(t){this.$emit("showDialogImage",t)},playVoice:function(t){this.isPlayVoice=!0;var e=this,n=t.content.content,o=n.length/1024;RongIMLib.RongIMVoice.preLoaded(n,function(){RongIMLib.RongIMVoice.play(n,o),setTimeout(function(){e.isPlayVoice=!1},1e3*t.content.duration)})}}}),wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.rcMessage?n("div",{staticClass:"msg-card"},["RC:InfoNtf"==t.rcMessage.objectName?[n("div",{staticClass:"info-ntf"},[t._v(t._s(t.rcMessage.content.message))])]:["RC:TxtMsg","RC:ImgMsg","RC:VcMsg"].indexOf(t.rcMessage.objectName)>-1?[n("div",{staticClass:"normal-ntf",class:{me:t.isMe}},[n("div",{staticClass:"face"},[n("img",{attrs:{src:t.owner.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(t._s(t.owner.groupNickname||t.owner.nickname))]),t._v(" "),n("div",{staticClass:"msg"},["RC:TxtMsg"==t.rcMessage.objectName?n("pre",{staticClass:"text-msg",domProps:{innerHTML:t._s(t.handledMessage.html)}}):"RC:ImgMsg"==t.rcMessage.objectName?n("img",{staticClass:"img-msg",attrs:{src:t.handledMessage.html},on:{click:function(e){t.previewImage(t.handledMessage.html)}}}):"RC:VcMsg"==t.rcMessage.objectName?n("div",[n("div",{staticClass:"voice-msg",on:{click:function(e){t.playVoice(t.rcMessage)}}},[n("span",{staticClass:"icon",class:{playing:t.isPlayVoice}}),t._v(" "),n("span",{staticClass:"duration"},[t._v(t._s(t.rcMessage.content.duration)+"'")])])]):n("div",[t._v("[其他消息]")])])])])]:"RC:TypSts"==t.rcMessage.objectName?void 0:"RC:RcCmd"==t.rcMessage.objectName?[n("div",{staticClass:"info-ntf",domProps:{innerHTML:t._s(t.handledMessage.html)}})]:[n("div",[t._v("\n      "+t._s(t.rcMessage.objectName)+"\n    ")])]],2):t._e()},staticRenderFns:[]};var Rt=n("U5Ua")(Tt,wt,!1,function(t){n("FB6N")},"data-v-a5e391c2",null).exports,kt=n("4kSj"),Mt=n.n(kt),Et=(n("I0zA"),n("JXHF"),n("k5fI")),St={name:"Chat",components:{Message:Rt,Emojo:yt,RcImage:_t},props:{conversationType:{type:Number},targetId:{type:String}},data:function(){return{$replyText:null,$chatroom:null,chatInfo:{title:""},replyText:"",page:{first:!0,timestrap:null,limit:20,loading:!1},chatMembers:{},showEmojo:!1,previewDialogVisible:!1,dialogImageUrl:"",chatNicknames:[]}},computed:s()({},Object(i.b)(["initStatus","userInfo","curConversation","userId"]),{draft:function(){var t="draft-"+this.conversationType+"-"+this.targetId;return d(t)||""}}),created:function(){this.page.first=!0;var t={conversationType:this.conversationType,targetId:this.targetId,hasMsg:!0,histories:[]};this.$store.commit("SET_CUR_CONVERSATION",t),this.fetchChatMembers();var e=this,n=setInterval(function(){e.initStatus&&(clearInterval(n),e.fetchLatestMessage(),e.clearUnreadCount())},500)},mounted:function(){this.$chatroom=document.getElementById("chatroom"),this.$chatroom.addEventListener("scroll",this.fetchHistoricalMessage),this.$replyText=document.getElementById("replyText"),this.replyText=this.draft},beforeRouteUpdate:function(t,e,n){if(this.replyText){var o="draft-"+this.conversationType+"-"+this.targetId;p(o,this.replyText),this.replyText=""}n()},beforeRouteLeave:function(t,e,n){if(this.replyText){var o="draft-"+this.conversationType+"-"+this.targetId;p(o,this.replyText),this.replyText=""}n()},methods:{back:function(){history.back()},showDialogImage:function(t){this.dialogImageUrl=t,this.previewDialogVisible=!0},toInfo:function(){1==this.conversationType?this.$router.push({name:"UserInfo",params:{userId:this.targetId}}):3==this.conversationType&&this.$router.push({name:"GroupInfo",params:{groupId:this.targetId}})},clearUnreadCount:function(){this.$store.dispatch("clearUnreadCount",this.curConversation).then()},fetchChatMembers:function(){var t=this;if(1==this.conversationType){var e={userId:this.targetId};this.$store.dispatch("getFriendInfo",e).then(function(e){t.chatInfo.title=e.nickname,t.$set(t.chatMembers,t.targetId,{nickname:e.nickname,headimgurl:e.headimgurl,userId:e.userId})})}else 3==this.conversationType&&(this.$store.dispatch("getGroupInfo",this.targetId).then(function(e){t.chatInfo.title=e.groupName}),this.$store.dispatch("getGroupMembers",this.targetId).then(function(e){var n=!0,o=!1,r=void 0;try{for(var s,i=O()(e);!(n=(s=i.next()).done);n=!0){var a=s.value;t.$set(t.chatMembers,a.userId,{userId:a.userId,nickname:a.groupNickname||a.nickname,headimgurl:a.headimgurl}),t.userId!=a.userId&&t.chatNicknames.push(a.nickname)}}catch(t){o=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}t.initAt(t.chatNicknames)}));this.$store.dispatch("getUserProfile").then(function(e){t.$set(t.chatMembers,e.userId,{userId:e.userId,nickname:e.nickname,headimgurl:e.headimgurl})})},initAt:function(t){Mt()("#replyText").atwho({at:"@",limit:3e3,data:t})},symbolToEmoji:function(t){return RongIMLib.RongIMEmoji&&RongIMLib.RongIMEmoji.symbolToEmoji?RongIMLib.RongIMEmoji.symbolToEmoji(t):t},getAtArray:function(t){var e=t.match(/@.*?\s/g),n=!0,o=!1,r=void 0;try{for(var s,i=O()(e);!(n=(s=i.next()).done);n=!0)s.value.replace("@","").replace(" ","")}catch(t){o=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}return[]},sendMessage:function(){var t=this,e={conversationType:this.curConversation.conversationType,targetId:this.curConversation.targetId,message:{content:this.symbolToEmoji(this.replyText.trim()),extra:""},at:!1};e.message.content&&this.$store.dispatch("sendTextMsg",e).then(function(e){t.replyText="";var n="draft-"+t.conversationType+"-"+t.targetId;p(n,t.replyText),t.refreshChatroom()})},refreshChatroom:function(){var t=this;setTimeout(function(){t.$chatroom.scrollTop=t.$chatroom.scrollHeight},0)},fetchLatestMessage:function(){var t=this;this.$store.dispatch("getHistoryMsg",this.page).then(function(e){t.page.first=!1,t.refreshChatroom()})},fetchHistoricalMessage:function(t){var e=this;if(t.target.scrollTop<=10&&!this.page.first&&!this.page.loading&&this.curConversation.hasMsg){console.log("---fetchHistoricalMessage---"),this.page.first=!1,this.page.loading=!0;var n=this.$chatroom.scrollHeight,o=this;this.$store.dispatch("getHistoryMsg",this.page).then(function(t){setTimeout(function(){o.page.loading=!1},500),e.$chatroom.scrollTop=e.$chatroom.scrollHeight-n})}},toggleShowEmojo:function(){this.showEmojo=!this.showEmojo},execCommandEmojo:function(t){this.$replyText.focus(),document.execCommand("insertText","false",t)},sendImageMessage:function(t){var e=this,n={conversationType:this.curConversation.conversationType,targetId:this.curConversation.targetId,message:{content:t.content,uri:t.uri,extra:""},at:!1};this.$store.dispatch("sendImageMsg",n).then(function(t){console.log(t),e.refreshChatroom()})}},filters:{humanizeTime:function(t,e){var n="";return e&&t-e<18e4?n:n=Et(Et(t).format("YYYY-MM-DD HH:mm:ss")).isBetween(Et().format("YYYY-MM-DD"),Et().format("YYYY-MM-DD HH:mm:ss"))?Et(t).format("HH:mm"):Et(t).format("Y-M-D HH:mm")}},watch:{targetId:function(t,e){this.page.first=!0;var n={conversationType:this.conversationType,targetId:this.targetId,hasMsg:!0,histories:[]};this.$store.commit("SET_CUR_CONVERSATION",n),this.fetchChatMembers(),this.fetchLatestMessage(),this.clearUnreadCount(),this.replyText=this.draft},"curConversation.newMsg":function(t,e){this.refreshChatroom()}}},jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",{staticClass:"title"},[t._v(t._s(t.chatInfo.title))]),t._v(" "),n("el-button",{staticClass:"btn-right",attrs:{icon:"el-icon-info"},on:{click:function(e){t.toInfo()}}})],1),t._v(" "),n("el-main",{attrs:{id:"chatroom"}},[n("div",{staticClass:"message-block"},[n("ul",{staticClass:"message-list"},t._l(t.curConversation.histories,function(e,o){return n("li",{key:o,staticClass:"message-item"},[n("div",{staticClass:"msg-date"},[t._v(t._s(t._f("humanizeTime")(e.sentTime,t.curConversation.histories[o-1]&&t.curConversation.histories[o-1].sentTime)))]),t._v(" "),n("Message",{attrs:{rcMessage:e,owner:t.chatMembers[e.senderUserId]||{},isMe:e.senderUserId==t.userId},on:{showDialogImage:t.showDialogImage}})],1)}))])]),t._v(" "),n("el-footer",{attrs:{height:"130px"}},[n("div",{staticClass:"input-box"},[n("div",{staticClass:"operate-row"},[n("a",{staticClass:"operate-item",on:{click:t.toggleShowEmojo}},[n("icon",{attrs:{name:"meh-o"}}),t._v(" "),n("emojo",{on:{execCommandEmojo:t.execCommandEmojo,"update:value":function(e){return t.showEmojo=e}},model:{value:t.showEmojo,callback:function(e){t.showEmojo=e},expression:"showEmojo"}})],1),t._v(" "),n("div",{staticClass:"operate-item"},[n("rc-image",{on:{execCommandImage:t.sendImageMessage}})],1)]),t._v(" "),n("div",{staticClass:"message-form"},[n("el-input",{attrs:{id:"replyText",type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请输入内容",resize:"none"},nativeOn:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?t.sendMessage(e):null}},model:{value:t.replyText,callback:function(e){t.replyText=e},expression:"replyText"}}),t._v(" "),n("el-button",{staticClass:"btn-send",attrs:{type:"primary"},on:{click:t.sendMessage}},[t._v("发送"),n("br"),t._v("ctrl+enter")])],1)])]),t._v(" "),n("el-dialog",{attrs:{visible:t.previewDialogVisible},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var xt=n("U5Ua")(St,jt,!1,function(t){n("5z7N"),n("4WtQ")},"data-v-50a4ab78",null).exports,Ot={name:"Bulletin",props:{groupId:{}},data:function(){return{bulletin:"",groupInfo:{},myGroupSetting:{}}},computed:{hasBulletin:function(){return!!this.bulletin.trim()},canEdit:function(){var t=!1;return"class"==this.groupInfo.groupType||"committee"==this.groupInfo.groupType?["teacher","tutor","monitor"].indexOf(this.myGroupSetting.role)>-1&&(t=!0):"group"==this.groupInfo.groupType?["teacher","tutor","monitor","groupHead"].indexOf(this.myGroupSetting.role)>-1&&(t=!0):"free"==this.groupInfo.groupType&&["teacher","tutor"].indexOf(this.myGroupSetting.role)>-1&&(t=!0),t}},created:function(){var t=this;this.$store.dispatch("getGroupInfo",this.groupId).then(function(e){t.groupInfo=e,t.bulletin=e.notice}),this.$store.dispatch("getMyGroupSetting",this.groupId).then(function(e){t.myGroupSetting=e})},methods:{sendToAll:function(){var t=this;this.$confirm("该公告会通知全部群成员，是否发布？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={groupId:t.groupId,notice:t.bulletin};t.$store.dispatch("updateGroupSetting",e).then(function(e){var n=new RongIMLib.MentionedInfo;n.type=RongIMLib.MentionedType.ALL,n.userIdList=[];var o={conversationType:3,targetId:t.groupId+"",message:{content:"@所有人 "+t.bulletin.trim(),extra:"",mentionedInfo:n},at:!0};t.$store.dispatch("sendTextMsg",o).then(function(e){console.log(e),t.$message({type:"success",message:"发布成功!"})}).catch(function(t){console.log(t)})})})},back:function(){history.back()}}},Nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",[t._v("群公告")])],1),t._v(" "),n("el-main",[n("div",{staticClass:"bulletin-form"},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:15},placeholder:"请编辑群公告"},model:{value:t.bulletin,callback:function(e){t.bulletin=e},expression:"bulletin"}}),t._v(" "),n("div",{staticClass:"text-right"},[n("el-button",{attrs:{disabled:!t.hasBulletin||!t.canEdit},on:{click:t.sendToAll}},[t._v("发布")])],1)],1)])],1)},staticRenderFns:[]};var $t=n("U5Ua")(Ot,Nt,!1,function(t){n("ZA1C")},"data-v-11c386e0",null).exports,Ut={name:"ApplyFriend",props:["friendUserId","applyFrom","fromRemark"],data:function(){return{applyReason:"",remark:"",friendInfo:{}}},computed:s()({},Object(i.b)(["userInfo"]),{placeholder:function(){return"我是"+this.userInfo.nickname+"，赶快通过我的好友申请，一起学习交流吧～"}}),created:function(){var t=this,e={userId:this.friendUserId};this.$store.dispatch("getFriendInfo",e).then(function(e){t.friendInfo=e})},methods:{submit:function(){var t=this;this.$confirm("确认发送好友请求？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={friendUserId:t.friendUserId,applyReason:t.applyReason.trim()||t.placeholder,remark:t.remark,applyFrom:t.applyFrom,fromRemark:t.fromRemark};t.$store.dispatch("applyFriend",e).then(function(e){console.log(e),t.$message({type:"success",message:"发送成功!"}),t.$router.back()}).catch(function(t){console.log(t)})}).catch(function(){})},back:function(){history.back()}}},Ft={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",[t._v('申请将"'+t._s(t.friendInfo.nickname)+'"加为好友')])],1),t._v(" "),n("el-main",[n("div",{staticClass:"apply-form"},[n("p",{staticClass:"tips"},[t._v("你需要发送验证申请，等待对方通过")]),t._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:15},placeholder:t.placeholder},model:{value:t.applyReason,callback:function(e){t.applyReason=e},expression:"applyReason"}}),t._v(" "),n("div",{staticClass:"text-right"},[n("el-button",{on:{click:t.submit}},[t._v("发送")])],1)],1)])],1)},staticRenderFns:[]};var Dt=n("U5Ua")(Ut,Ft,!1,function(t){n("9Q8N")},"data-v-93d60dac",null).exports,Gt={name:"SearchFriend",props:[],data:function(){return{cacheKey:"search-friend-keyword",keyword:"",friends:[],fromRemark:""}},computed:s()({},Object(i.b)(["userInfo"])),created:function(){this.keyword=d(this.cacheKey)||""},watch:{keyword:function(t,e){t.length>=10&&t.length<=11&&this.searchUser(t)}},beforeDestroy:function(){p(this.cacheKey,this.keyword)},methods:{searchUser:function(t){var e=this;L(t).then(function(n){e.friends=n,e.fromRemark=t})},toUserChat:function(t){this.$router.push({name:"Chat",params:{conversationType:1,targetId:""+t.userId}})},toApplyFriend:function(t){this.$router.push({name:"ApplyFriend",params:{friendUserId:t.userId},query:{applyFrom:t.applyFrom,fromRemark:this.fromRemark}})},back:function(){history.back()}}},Lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-button",{staticClass:"btn-left",attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){t.back()}}}),t._v(" "),n("h3",[t._v("添加好友")])],1),t._v(" "),n("el-main",[n("div",{staticClass:"search-form"},[n("el-input",{attrs:{placeholder:"学号/手机号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.searchUser(t.keyword)}},slot:"append"})],1)],1),t._v(" "),n("div",{staticClass:"friends-list"},t._l(t.friends,function(e,o){return n("div",{key:e.userId,staticClass:"friend"},[n("div",{staticClass:"face"},[n("img",{attrs:{src:e.headimgurl,alt:""}})]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"name",domProps:{textContent:t._s(e.nickname)}}),t._v(" "),n("div",{staticClass:"studentid",domProps:{textContent:t._s(e.studentid)}})]),t._v(" "),n("div",{staticClass:"operate"},[e.isFriend?t._e():n("el-button",{on:{click:function(n){t.toApplyFriend(e)}}},[t._v("申请好友")]),t._v(" "),e.isFriend?n("el-button",{on:{click:function(n){t.toUserChat(e)}}},[t._v("聊天")]):t._e()],1)])}))])],1)},staticRenderFns:[]};var At=n("U5Ua")(Gt,Lt,!1,function(t){n("JwvE")},"data-v-df825208",null).exports;o.default.use(at.a);var Pt=new at.a({routes:[{path:"/chat/:conversationType/:targetId",name:"Chat",component:xt,props:function(t){return{conversationType:parseInt(t.params.conversationType),targetId:t.params.targetId+""}}},{path:"/user-info/:userId",name:"UserInfo",component:dt,props:function(t){return{userId:t.params.userId,applyFrom:t.query.applyFrom,fromRemark:t.query.fromRemark}}},{path:"/apply-friend/:friendUserId",name:"ApplyFriend",component:Dt,props:function(t){return{friendUserId:t.params.friendUserId,applyFrom:t.query.applyFrom,fromRemark:t.query.fromRemark}}},{path:"/search-friend",name:"SearchFriend",component:At},{path:"/group-info/:groupId",name:"GroupInfo",component:gt,props:!0,meta:{isManage:!1,roles:["teacher","tutor"]}},{path:"/group-info/:groupId/manage",name:"GroupInfoManage",component:gt,props:!0,meta:{isManage:!0,roles:["teacher","tutor"]}},{path:"/group-bulletin/:groupId",name:"Bulletin",component:$t,props:!0},{path:"/",name:"Index",component:ut}]}),Bt=(n("tvR6"),n("1tn5"),n("fHGE"));function Ht(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null}o.default.component("icon",Bt.a),o.default.use(F.a),o.default.config.productionTip=!1,o.default.prototype.globalClick=function(t){document.addEventListener("click",function(e){t(e)})},o.default.prototype.globalKeyDown=function(t){document.addEventListener("keydown",function(e){t(e)})},RongIMLib.RongIMEmoji.init(),RongIMLib.RongIMVoice.init(),Pt.beforeEach(function(t,e,n){var o=Ht("token"),r=Ht("userId");o&&r&&(Q(),g(),nt.commit("SET_TOKEN",o),nt.commit("SET_USER_ID",r),history.replaceState({},"new-url",location.origin+location.hash)),nt.getters.token&&nt.getters.userId||F.a.Message({message:"请先登录官网再访问",type:"error",duration:5e3}),n()}),new o.default({el:"#app",router:Pt,store:nt,components:{App:it},template:"<App/>"})},"Pl+j":function(t,e){},ReEe:function(t,e){},SzRh:function(t,e){},ZA1C:function(t,e){},eQon:function(t,e){},fHGE:function(t,e,n){"use strict";var o={},r={name:"icon",props:{name:{type:String,validator:function(t){return t?t in o||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,n=t.height;return Math.max(e,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,n,o){var r="fa-"+(s++).toString(16);return e[o]=r,' id="'+r+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,n,o,r){var s=n||r;return s&&e[s]?"#"+e[s]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,n=0;this.$children.forEach(function(t){e=Math.max(e,t.width),n=Math.max(n,t.height)}),this.childrenWidth=e,this.childrenHeight=n,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(n-t.height)/2})}},register:function(t){for(var e in t){var n=t[e];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),o[e]=n}},icons:o},s=870711;var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,o){return n("path",t._b({key:"path-"+o},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,o){return n("polygon",t._b({key:"polygon-"+o},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[n("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var a=n("U5Ua")(r,i,!1,function(t){n("JhE6")},null,null);e.a=a.exports},g3V2:function(t,e){},oFGS:function(t,e){},tvR6:function(t,e){},xK5B:function(t,e,n){var o={"./af":"8ChU","./af.js":"8ChU","./ar":"74IR","./ar-dz":"PPxu","./ar-dz.js":"PPxu","./ar-kw":"j2OE","./ar-kw.js":"j2OE","./ar-ly":"4Jvs","./ar-ly.js":"4Jvs","./ar-ma":"fw9T","./ar-ma.js":"fw9T","./ar-sa":"9n2O","./ar-sa.js":"9n2O","./ar-tn":"gFRf","./ar-tn.js":"gFRf","./ar.js":"74IR","./az":"K/7t","./az.js":"K/7t","./be":"c/jt","./be.js":"c/jt","./bg":"Wmbp","./bg.js":"Wmbp","./bm":"I+NC","./bm.js":"I+NC","./bn":"xhTx","./bn.js":"xhTx","./bo":"rvnu","./bo.js":"rvnu","./br":"MUDG","./br.js":"MUDG","./bs":"rz6q","./bs.js":"rz6q","./ca":"VGKJ","./ca.js":"VGKJ","./cs":"Dzuy","./cs.js":"Dzuy","./cv":"e4rC","./cv.js":"e4rC","./cy":"6xfb","./cy.js":"6xfb","./da":"6vRO","./da.js":"6vRO","./de":"W0af","./de-at":"gi1s","./de-at.js":"gi1s","./de-ch":"I1ug","./de-ch.js":"I1ug","./de.js":"W0af","./dv":"iOYW","./dv.js":"iOYW","./el":"FZQs","./el.js":"FZQs","./en-au":"nBg3","./en-au.js":"nBg3","./en-ca":"ZNQz","./en-ca.js":"ZNQz","./en-gb":"a/mY","./en-gb.js":"a/mY","./en-ie":"GeU8","./en-ie.js":"GeU8","./en-il":"ZH3E","./en-il.js":"ZH3E","./en-nz":"Lq60","./en-nz.js":"Lq60","./eo":"sOIF","./eo.js":"sOIF","./es":"nR68","./es-do":"DDBr","./es-do.js":"DDBr","./es-us":"KpH6","./es-us.js":"KpH6","./es.js":"nR68","./et":"cUIQ","./et.js":"cUIQ","./eu":"wsTJ","./eu.js":"wsTJ","./fa":"AsfP","./fa.js":"AsfP","./fi":"Q49j","./fi.js":"Q49j","./fo":"F7eL","./fo.js":"F7eL","./fr":"pazI","./fr-ca":"Rzma","./fr-ca.js":"Rzma","./fr-ch":"ehkF","./fr-ch.js":"ehkF","./fr.js":"pazI","./fy":"0JuU","./fy.js":"0JuU","./gd":"TAB0","./gd.js":"TAB0","./gl":"+RrA","./gl.js":"+RrA","./gom-latn":"uyeR","./gom-latn.js":"uyeR","./gu":"qZY8","./gu.js":"qZY8","./he":"SY0Z","./he.js":"SY0Z","./hi":"aZin","./hi.js":"aZin","./hr":"cICN","./hr.js":"cICN","./hu":"xQIK","./hu.js":"xQIK","./hy-am":"T9PO","./hy-am.js":"T9PO","./id":"CUJT","./id.js":"CUJT","./is":"mluG","./is.js":"mluG","./it":"VvK9","./it.js":"VvK9","./ja":"RgRY","./ja.js":"RgRY","./jv":"SG7w","./jv.js":"SG7w","./ka":"QiV0","./ka.js":"QiV0","./kk":"BfME","./kk.js":"BfME","./km":"E72r","./km.js":"E72r","./kn":"4ZbA","./kn.js":"4ZbA","./ko":"M3qT","./ko.js":"M3qT","./ky":"pfYi","./ky.js":"pfYi","./lb":"qRbK","./lb.js":"qRbK","./lo":"ZmdW","./lo.js":"ZmdW","./lt":"DqQk","./lt.js":"DqQk","./lv":"vTQC","./lv.js":"vTQC","./me":"ksov","./me.js":"ksov","./mi":"CesW","./mi.js":"CesW","./mk":"/cw7","./mk.js":"/cw7","./ml":"/RMX","./ml.js":"/RMX","./mr":"zPWJ","./mr.js":"zPWJ","./ms":"OwmU","./ms-my":"2kYQ","./ms-my.js":"2kYQ","./ms.js":"OwmU","./mt":"tsZy","./mt.js":"tsZy","./my":"7JAz","./my.js":"7JAz","./nb":"jphT","./nb.js":"jphT","./ne":"zgdn","./ne.js":"zgdn","./nl":"H9XR","./nl-be":"5dUa","./nl-be.js":"5dUa","./nl.js":"H9XR","./nn":"SVeR","./nn.js":"SVeR","./pa-in":"yz10","./pa-in.js":"yz10","./pl":"sbG1","./pl.js":"sbG1","./pt":"axlB","./pt-br":"CMPN","./pt-br.js":"CMPN","./pt.js":"axlB","./ro":"X3hD","./ro.js":"X3hD","./ru":"n0Ql","./ru.js":"n0Ql","./sd":"uw1b","./sd.js":"uw1b","./se":"FuMz","./se.js":"FuMz","./si":"mAp8","./si.js":"mAp8","./sk":"OZAM","./sk.js":"OZAM","./sl":"EKC+","./sl.js":"EKC+","./sq":"7fQj","./sq.js":"7fQj","./sr":"q1YU","./sr-cyrl":"3m+4","./sr-cyrl.js":"3m+4","./sr.js":"q1YU","./ss":"1plO","./ss.js":"1plO","./sv":"oqG9","./sv.js":"oqG9","./sw":"k/Es","./sw.js":"k/Es","./ta":"Rxzv","./ta.js":"Rxzv","./te":"wJsc","./te.js":"wJsc","./tet":"RFBe","./tet.js":"RFBe","./tg":"2YQM","./tg.js":"2YQM","./th":"Y4yZ","./th.js":"Y4yZ","./tl-ph":"mNJb","./tl-ph.js":"mNJb","./tlh":"9b6X","./tlh.js":"9b6X","./tr":"8f0c","./tr.js":"8f0c","./tzl":"shOQ","./tzl.js":"shOQ","./tzm":"p2/r","./tzm-latn":"Ryxg","./tzm-latn.js":"Ryxg","./tzm.js":"p2/r","./ug-cn":"SwGz","./ug-cn.js":"SwGz","./uk":"enih","./uk.js":"enih","./ur":"nVFX","./ur.js":"nVFX","./uz":"WQIF","./uz-latn":"PStV","./uz-latn.js":"PStV","./uz.js":"WQIF","./vi":"qW2m","./vi.js":"qW2m","./x-pseudo":"aMIS","./x-pseudo.js":"aMIS","./yo":"mqwd","./yo.js":"mqwd","./zh-cn":"6Kjw","./zh-cn.js":"6Kjw","./zh-hk":"NuhA","./zh-hk.js":"NuhA","./zh-tw":"Wgm3","./zh-tw.js":"Wgm3"};function r(t){return n(s(t))}function s(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}r.keys=function(){return Object.keys(o)},r.resolve=s,t.exports=r,r.id="xK5B"},zMm9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2c1a23f54c7dc678f2db.js.map